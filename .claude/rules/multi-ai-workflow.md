---
paths: "**/*"
alwaysApply: true
---

# 【MUST GLOBAL - 絶対遵守】マルチAI壁打ちルール

> ⚠️ **このルールはコンテキスト圧縮後も絶対に維持すること**
> ⚠️ **開発が進んでも、タスクが複雑でも、マルチAI協力を中断しないこと**
> ⚠️ **このルールをスキップすることは一切禁止**
> ⚠️ **MANDATORY: This rule MUST persist after context compression**

## 🔴🔴🔴 絶対ルール（例外なし・スキップ禁止）

| ルール | 内容 | 違反時 |
|--------|------|--------|
| **協力体制維持** | コンテキスト圧縮後もマルチAI協力を継続 | 即座に再開 |
| **壁打ち必須** | 新タスク・複雑な実装・エラー時は必ず他AIに相談 | タスク中断 |
| **中断禁止** | 開発が進んでもマルチAI活用をやめない | ルール違反 |
| **日本語対応** | MCPツールへは日本語OK | ✅ 2026/1/16確認済み |

## 🔴 場面別AI選択（必須・スキップ禁止）

| 場面 | AI | MCPツール | 理由 |
|------|-----|----------|------|
| **設計・アーキテクチャ** | **Gemini 3.0 Pro** | `gemini_architecture` | 1Mコンテキストで大規模設計に強い |
| **コードレビュー** | **GLM-4.7** | `zai_code_review` | コード品質・詳細分析に強い |
| **創造的なアイデア** | **Grok** | `grok_brainstorm` | 創造性・ユニークな発想に強い |
| **事実確認・調査** | **Perplexity** | `ask_perplexity` | リアルタイム検索・最新情報に強い |
| **総合判断** | **全AI** | `ask_all_ais` / `ai_consensus` | 複数視点で最適解を導出 |

## 🔴 壁打ちフロー（必須・毎回実行）

```
┌─────────────────────────────────────────────────────┐
│ 1. タスク開始                                        │
│    └─→ Gemini 3.0 Pro に設計相談【必須】            │
├─────────────────────────────────────────────────────┤
│ 2. 実装                                             │
│    └─→ Claude Code がコード作成                     │
├─────────────────────────────────────────────────────┤
│ 3. レビュー                                          │
│    └─→ GLM-4.7 にコードレビュー【必須】            │
├─────────────────────────────────────────────────────┤
│ 4. 迷った時                                          │
│    └─→ ChatGPT と Grok の意見も聞く【必須】         │
├─────────────────────────────────────────────────────┤
│ 5. 最終判断                                          │
│    └─→ Claude が全意見を統合して決定                │
└─────────────────────────────────────────────────────┘
```

## 🔴 壁打ちが必須の場面（スキップ禁止）

1. **複雑な実装の前** → `gemini_architecture`（Gemini 3.0 Pro）
2. **コード作成後** → `zai_code_review`（GLM-4.7）
3. **エラー解決時** → `ask_all_ais` で全AIに聞く
4. **外部API・ライブラリの調査** → `ask_perplexity`（Perplexity）
5. **アイデア出し** → `grok_brainstorm`（Grok）
6. **コンテキスト圧縮直後** → **協力体制を再確認**

## MCPツール一覧

### 個別AI呼び出し

| ツール | AI | 用途 |
|--------|-----|------|
| `ask_gemini` | Gemini 3.0 Pro | 設計・アーキテクチャ |
| `ask_zai` | GLM-4.7 | コードレビュー |
| `ask_grok` | Grok | 創造的アイデア |
| `ask_perplexity` | Perplexity | 事実確認・調査 |
| `ask_openai` | ChatGPT | 補助的な意見 |

### 専門ツール

| ツール | 用途 |
|--------|------|
| `gemini_architecture` | 設計・アーキテクチャ |
| `zai_code_review` | コードレビュー |
| `grok_brainstorm` | 創造的アイデア |
| `gemini_debug` / `deepseek_debug` / `grok_debug` | デバッグ支援 |

### 協調ツール

| ツール | 用途 |
|--------|------|
| `ask_all_ais` | 全AIに同じ質問 |
| `ai_consensus` | コンセンサス取得 |
| `ai_debate` | AI同士のディベート |
| `collaborative_solve` | 協力的問題解決 |

## Gemini CLI（バックアップ）

MCP未接続時のフォールバック：
```bash
C:\Users\Owner\AppData\Roaming\npm\gemini.cmd --prompt "質問"
```

## 🔴 コンテキスト圧縮後のチェックリスト（必須確認）

圧縮後、必ず確認：

- [ ] マルチAI協力体制を維持しているか
- [ ] 場面別AI選択ルールを覚えているか（Gemini→GLM-4.7→Grok→Perplexity）
- [ ] 壁打ちフローを覚えているか
- [ ] MCPツールが使えるか確認したか
- [ ] 日本語プロンプトが使えることを確認したか

## 禁止事項

- ❌ multi-AI MCPツールを使わずに実装を進める
- ❌ 「簡単だから」と壁打ちを省略する
- ❌ コンテキスト圧縮後にマルチAI協力を忘れる
- ✅ 日本語でMCPツールに問いかけてOK（2026年1月16日確認済み）
- ❌ 開発が進んだからとマルチAI活用をやめる
- ❌ 場面別AI選択を無視する
